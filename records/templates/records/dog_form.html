{% extends "base.html" %}

{% block title %}
    {% if object %}Edit Dog - {{ object.name }}{% else %}Create Dog{% endif %} - Dog Rescue Management
{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-card">
        <div class="form-header">
            <h1 class="form-title">
                {% if object %}
                    ‚úèÔ∏è Edit Dog
                {% else %}
                    ‚ûï Create Dog
                {% endif %}
            </h1>
        </div>

        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="{{ form.name.id_for_label }}" class="form-label">
                    Dog Name <span class="required-indicator">*</span>
                </label>
                <input type="text" 
                       name="name" 
                       id="{{ form.name.id_for_label }}" 
                       class="form-input" 
                       placeholder="Enter dog name"
                       value="{{ form.name.value|default:'' }}"
                       required>
                {% if form.name.errors %}
                    <div class="form-error">{{ form.name.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.age_months.id_for_label }}" class="form-label">
                    Age (Months) <span class="required-indicator">*</span>
                </label>
                <input type="number" 
                       name="age_months" 
                       id="{{ form.age_months.id_for_label }}" 
                       class="form-input" 
                       placeholder="Age in months"
                       value="{{ form.age_months.value|default:'' }}"
                       min="0"
                       required>
                {% if form.age_months.errors %}
                    <div class="form-error">{{ form.age_months.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.gender.id_for_label }}" class="form-label">
                    Gender <span class="required-indicator">*</span>
                </label>
                <select name="gender" 
                        id="{{ form.gender.id_for_label }}" 
                        class="form-select"
                        required>
                    <option value="">Select gender</option>
                    {% for value, label in form.gender.field.choices %}
                        <option value="{{ value }}" {% if form.gender.value == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
                {% if form.gender.errors %}
                    <div class="form-error">{{ form.gender.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.breed.id_for_label }}" class="form-label">
                    Breed <span class="required-indicator">*</span>
                </label>
                <select name="breed" 
                        id="{{ form.breed.id_for_label }}" 
                        class="form-select"
                        required>
                    <option value="">Select breed</option>
                    {% for value, label in form.breed.field.choices %}
                        <option value="{{ value }}" {% if form.breed.value == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
                {% if form.breed.errors %}
                    <div class="form-error">{{ form.breed.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.default_photo.id_for_label }}" class="form-label">
                    Default Photo
                </label>
                <input type="file" 
                       name="default_photo" 
                       id="{{ form.default_photo.id_for_label }}" 
                       class="form-input" 
                       accept="image/*">
                {% if form.default_photo.errors %}
                    <div class="form-error">{{ form.default_photo.errors.0 }}</div>
                {% endif %}
                {% if object and object.default_photo %}
                    <div class="current-photo">
                        <p>Current photo:</p>
                        <img src="{{ object.default_photo.url }}" alt="{{ object.name }}" style="max-width: 200px; max-height: 200px; border-radius: 5px;">
                    </div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.health_status.id_for_label }}" class="form-label">
                    Health Status
                </label>
                <select name="health_status" 
                        id="{{ form.health_status.id_for_label }}" 
                        class="form-select">
                    <option value="">Select health status</option>
                    {% for value, label in form.health_status.field.choices %}
                        <option value="{{ value }}" {% if form.health_status.value == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
                {% if form.health_status.errors %}
                    <div class="form-error">{{ form.health_status.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.adoption_status.id_for_label }}" class="form-label">
                    Adoption Status
                </label>
                <select name="adoption_status" 
                        id="{{ form.adoption_status.id_for_label }}" 
                        class="form-select">
                    <option value="">Select adoption status</option>
                    {% for value, label in form.adoption_status.field.choices %}
                        <option value="{{ value }}" {% if form.adoption_status.value == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
                {% if form.adoption_status.errors %}
                    <div class="form-error">{{ form.adoption_status.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" 
                           name="eligible_for_adoption" 
                           id="{{ form.eligible_for_adoption.id_for_label }}" 
                           class="form-checkbox"
                           {% if form.eligible_for_adoption.value %}checked{% endif %}>
                    <label for="{{ form.eligible_for_adoption.id_for_label }}" class="form-label">
                        Eligible for Adoption
                    </label>
                </div>
                {% if form.eligible_for_adoption.errors %}
                    <div class="form-error">{{ form.eligible_for_adoption.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-actions">
                <a href="{% if object %}{% url 'records:dog_detail' object.pk %}{% else %}{% url 'main:dashboard' %}{% endif %}" 
                   class="btn-cancel">
                    Cancel
                </a>
                <button type="submit" class="btn-submit">
                    {% if object %}
                        üíæ Update Dog
                    {% else %}
                        ‚ûï Create Dog
                    {% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}